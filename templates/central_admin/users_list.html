{% extends 'central_admin_base.html' %}
{% load static %}

{% block title %}All Users{% endblock %}
{% block page_title %}All Users{% endblock %}
{% block page_subtitle %}Manage all registered users{% endblock %}

{% block content %}
                {% if messages %}
                <div class="max-w-md mx-auto mt-4">
                    {% for message in messages %}
                    <div class="p-3 rounded-md text-center 
                        {% if message.tags == 'success' %}bg-green-100 text-green-700{% elif message.tags == 'error' %}bg-red-100 text-red-700{% endif %}">
                        {{ message }}
                    </div>
                    {% endfor %}
                </div>
                {% endif %}

<div class="max-w-7xl mx-auto bg-white shadow-md rounded-xl p-6">

    <table class="min-w-full border border-gray-200 rounded-xl">
        <thead class="bg-gray-100 text-gray-700">
            <tr>
                <th class="px-4 py-2 text-left">Username</th>
                <th class="px-4 py-2 text-left">Email</th>
                <th class="px-4 py-2 text-left">Role</th>
                <th class="px-4 py-2 text-left">Plan</th>
                <th class="px-4 py-2 text-left">Credits</th>
                <th class="px-4 py-2 text-left">Status</th>
                <th class="px-4 py-2 text-center">Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for user in users %}
            <tr class="border-t hover:bg-gray-50 transition">
                <td class="px-4 py-2 font-medium">{{ user.username }}</td>
                <td class="px-4 py-2">{{ user.email }}</td>
                <td class="px-4 py-2 capitalize">{{ user.role }}</td>
                <td class="px-4 py-2">{{ user.plan_type|title }}</td>
                <td class="px-4 py-2">{{ user.available_credits }}</td>
                <td class="px-4 py-2">
                    {% if user.plan_status == 'active' %}
                        <span class="text-green-600 font-semibold">Active</span>
                    {% elif user.plan_status == 'expired' %}
                        <span class="text-red-500 font-semibold">Expired</span>
                    {% else %}
                        <span class="text-gray-500">Inactive</span>
                    {% endif %}
                </td>
                <td class="px-4 py-2 text-center space-x-2">
                    <a href="{% url 'central_admin:edit_user' user.id %}" class="text-blue-500 hover:text-blue-700 font-semibold">Edit</a>
                    <a href="{% url 'central_admin:delete_user' user.id %}" onclick="return confirm('Are you sure you want to delete this user?')" class="text-red-500 hover:text-red-700 font-semibold">Delete</a>
                </td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="7" class="px-4 py-4 text-center text-gray-500">No users found.</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}
